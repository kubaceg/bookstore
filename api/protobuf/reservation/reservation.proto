syntax = "proto3";
package reservation;
option go_package = "github.com/kubaceg/bookstore/internal/common/genproto/reservation;reservation";

import "google/protobuf/duration.proto";
import "google/protobuf/timestamp.proto";

service ReservationService {
  rpc RentBook(CreateReservation) returns (ReservationId) {}
  rpc ReturnBook(ReservationId) returns (ReservationId) {}
  rpc GetReservationList(ReservationFilter) returns (ReservationList) {}
}

message ReservationFilter {
  ReservationType reservationType = 1;
}

enum ReservationType {
  ALL = 0;
  ACTIVE = 1;
  OVERDUE = 2;
  CLOSED = 3;
}

message ReservationList {
  repeated Reservation reservation = 1;
}

message Reservation {
  string reservationId = 1;
  string userId = 2;
  string bookId = 3;
  google.protobuf.Timestamp createdAt = 4;
  google.protobuf.Duration duration = 5;
  bool overdue = 6;
}

message CreateReservation {
  string userId = 2;
  string bookId = 3;
  google.protobuf.Timestamp createdAt = 4;
  google.protobuf.Duration duration = 5;
}

message ReservationId {
  string reservationId = 1;
}